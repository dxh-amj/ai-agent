#!/usr/bin/env sh
# Colors
GREEN='\033[0;32m'
RED='\033[0;31m'
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
MAGENTA='\033[0;35m'
BLUE='\033[0;34m'
BOLD='\033[1m'
NC='\033[0m' # No Color

echo "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“${NC}"
echo "${CYAN}â”ƒ     ${YELLOW}Running pre-commit checks...     ${CYAN}â”ƒ${NC}"
echo "${CYAN}â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›${NC}"

# Run lint-staged
yarn lint-staged
exit_code=$?

if [ $exit_code -ne 0 ]; then
  echo ""
  echo "${RED}${BOLD}âœ– Linting failed!${NC}"
  echo ""
  echo "${MAGENTA}${BOLD}ğŸ’¡ Common issues and how to fix them:${NC}"
  echo ""
  echo "${BOLD}â€¢ TypeScript errors:${NC}"
  echo "  - ${YELLOW}Missing imports${NC}: Check that all types/components are imported"
  echo "  - ${YELLOW}Type errors${NC}: Ensure proper typing is used instead of 'any'"
  echo ""
  echo "${BOLD}â€¢ ESLint errors:${NC}"
  echo "  - ${YELLOW}Unused variables${NC}: Remove or use variables/imports"
  echo "  - ${YELLOW}Missing returns${NC}: Ensure functions return proper values"
  echo ""
  echo "${BLUE}To bypass these checks (not recommended):${NC} ${CYAN}git commit --no-verify${NC}"
  echo ""
  exit 1
fi

echo "${GREEN}âœ“ Pre-commit checks passed!${NC}"
